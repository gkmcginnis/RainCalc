<!DOCTYPE html>
    <head>
        <title>Rainwater Calculator</title>
    <meta name="description" content="A calculator for rainwater harvesting" />
    <meta name="keywords" content="design, documentation, drafting" />
    <meta http-equiv="author" content="Kyle McGinnis" />
    <meta lang="en-us" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="Styles/styles.css" type="text/css" rel="stylesheet">
    
    </head>
<body>
    <script type='text/javascript' src='https://code.jquery.com/jquery-1.8.3.min.js'></script>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>

function resetAllValues() {
    $('.results').find('input:text').val('');
}

function calculateTotal()
{
  let subtotal={}
  
  subtotal.T1 = ($("#Area1").val() * $("#rainfall1").val() * $("#coe1").val() * 7.48) 
  $("#subtotal1").val(subtotal.T1.toFixed(0));
  
  subtotal.T2 = ($("#Area2").val() * $("#rainfall1").val() * $("#coe2").val() * 7.48) 
  $("#subtotal2").val(subtotal.T2.toFixed(0));
  
  subtotal.T3 = ($("#Area3").val() * $("#rainfall1").val() * $("#coe3").val() * 7.48) 
  $("#subtotal3").val(subtotal.T3.toFixed(0));
  
  subtotal.T4 = ($("#Area4").val() * $("#rainfall1").val() * $("#coe4").val() * 7.48) 
  $("#subtotal4").val(subtotal.T4.toFixed(0));

  
  let total = subtotal.T1 + subtotal.T2 + subtotal.T3 + subtotal.T4;
  let ccf = total/748;
 
  $("#grandtotal").val(total.toFixed(0));

  $("#totalccf").val(ccf.toFixed(2));
  
  $("#rainfall1").keyup(function(){
    $("#rainfall2").val(this.value)
    $("#rainfall3").val(this.value)
    $("#rainfall4").val(this.value);
})
}


 $(function() 
   {
     $(".under").on("change keyup",calculateTotal)
 })

 function copyGrand() {
  /* Get the text field */
  var copyText = document.getElementById("grandtotal");

  /* Select the text field */
  copyText.select();
  copyText.setSelectionRange(0, 99999); /* For mobile devices */

  /* Copy the text inside the text field */
  document.execCommand("copy");

  /* Alert the copied text */
  alert("Copied your Grand Total: " + copyText.value + ". That's a lot of water!");
}

</script>
 <div>
 <div id="header">
    <h2>Rainwater Harvesting Calculator</h2>
    <h3>Calculating the potential for water collection on your property</h3>
 </div>
<p class="intro">You can perform these calculations to determine an estimate of the
total <b>potentially collectable</b> gallons of water that fall on your roof and in your yard during
any given period of time; annual, single day, monsoon season, etc.<br />
The <b>total</b> will generate as soon as you change any <input class="undemo" value="value." size="5"></input> You only need to fill out the first <input class="undemo" value="rainfall variable." size="15"></input>
</p>
 </div>
 
 <div class="results">
    <table>
        <tr class="tblecntxt">
            <th></th>
            <th style="vertical-align:bottom">the "bird's eye"<br /> view, slope<br />doesn't matter<br />&#8595;</th>
            <th style="vertical-align:bottom">inches&#8202;/&#8202;12<br />&#8595;</th>
            <th class="tblecntxt">Roof: 0.8&#8202;&#9472;&#8202;0.95<br/>
                Bare earth: 0.3&#8202;&#9472;&#8202;0.55<br />
                Grass: 0.1&#8202;&#9472;&#8202;0.25<br />&#8595;</th>
            <th></th>
            <th style="vertical-align:bottom">rounded to nearest whole gallon<br />&#8595;</th>
        </tr>
        <tr class="header">
          <th class="surf">surface</th>
          <th>area (ft<sup>2</sup>)</th>
          <th>rainfall (ft.)</th>
          <th>runoff coefficient</th>
          <th style="width: fit-content">gal/ft<sup>3</sup></th>
          <th>total (gal)</th>
        </tr>
<!-- Roof -->
        <tr>
          <td class="surf">Roof</td>
          <td class="under"><input size="10" id = "Area1" value = "100"></input>&#215;</td>
          <td class="under"><input size="10" id = "rainfall1" value = "0.25"></input>&#215;</td>
          <td class="under"><input size="10" id = "coe1" value = "0.8" min="0" max="1"></input>&#215;</td>
          <td style="width: fit-content;">7.48 &#61;</td>
          <td class="total"><input class="total" readonly value="" id="subtotal1"></input></td>
        </tr>
<!-- Yard -->
        <tr>
          <td class="surf">Yard</td>
          <td class="under"><input size="10" id = "Area2" value = "0"></input>&#215;</td>
          <td class="under"><input size="10" id = "rainfall2" readonly></input>&#215;</td>
          <td class="under"><input size="10" id = "coe2" value = "0.0"></input>&#215;</td>
          <td>7.48 &#61;</td>
          <td class="total"><input class="total"  readonly value="" id="subtotal2"></input></td>
        </tr>
<!-- Surface 2 -->
        <tr>
          <td class="surf"><input id="custsurf" class="surf" value="Surface 1"></input></td>
          <td class="under"><input size="10" id = "Area3" value = "0"></input>&#215;</td>
          <td class="under"><input size="10" id = "rainfall3" readonly></input>&#215;</td>
          <td class="under"><input size="10" id = "coe3" value = "0.0"></input>&#215;</td>
          <td>7.48 &#61;</td>
          <td class="total"><input class="total"  readonly value="" id="subtotal3"></input></td>
        </tr>
<!-- Surface 2 -->
        <tr>
          <td class="surf">Surface 2</td>
          <td class="under"><input size="10" id = "Area4" value = "0"></input>&#215;</td>
          <td class="under"><input size="10" id = "rainfall4" readonly></input>&#215;</td>
          <td class="under"><input size="10" id = "coe4" value = "0.0"></input>&#215;</td>
          <td>7.48 &#61;</td>
          <td class="total"><input class="total"  readonly value="" id="subtotal4"></input></td>
        </tr>
<!-- Action buttons and GT -->
        <tr>
            <td class="pointer">&#9758;</td>
            <td ><button id="clearbutton" class="button" type="button" onClick="resetAllValues();">Clear Cells</button></td>
            <td class="pointer">&#9758;</td>
            <td colspan="1"><button id="grandbutton" class="button" onclick="copyGrand()">Copy Grand total</button></td>
            <td class="grandtext" colspan="1"><span> <br /><b>Grand total</b></span></td>

            <td class="total"><input size="15" class="total" id="grandtotal" readonly></input></td>
        </tr>
<!-- Total CCF row -->
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="grandtext" colspan="2"><span>Total CCF (total&#8202;&#247;&#8202;748)<br /><em>Centum Cubic Feet</em></span></td>
            <td class="total"><input size="15" class="total" id="totalccf" readonly></input></td>
        </tr>
        </tr>
      </table>
 </div>
<div id="footer">
<p class="footer">
Formulas and concept from Brad Lancaster ºs <b><a href="https://www.harvestingrainwater.com/" target="_blank"> Rainwater Harvesting for Drylands and Beyond: Volume 1</a></b>&nbsp;(link opens in new tab)<br />
Calculator produced in the LTP 140 class at Pima Community College, Spring 2020 <br/>
This should only be used for estimation purposes. Not responsible for seasonal meteorological variation and unpredictability. <br />
Published March 2021. Work in progress.
</p>
<table style="width: 25%;">
  <tr>
    <td class="pointer">&#9758;</td>
    <td><button class="button" type="button" onclick="location.href='mailto:gkylemcginnis@gmail.com';">Email Kyle</button></td>

  </tr>
<!-- <button class="button" type="button" onclick="location.href='mailto:gkylemcginnis@gmail.com';">Email Kyle</button> -->
</table>
</div>
  
 </body>
</html>
